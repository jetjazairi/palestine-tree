<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>A Tree of Hearts for Palestine</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to top, #cdeffd, #f5f5f5);
      text-align: center;
    }

    h1 { margin-top: 30px; font-size: 2.2em; }
    p { font-size: 1.1em; margin: 10px; }

    #tree-container {
      position: relative;
      margin: 40px auto;
      width: 300px;
      height: 500px;
    }

    /* Trunk */
    #trunk {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 70px;
      height: 180px;
      background: sienna;
      border-radius: 30px 30px 10px 10px;
      box-shadow: inset -6px 0 #8b4513, inset 6px 0 #a0522d;
    }

    /* Canopy */
    #canopy {
      position: absolute;
      bottom: 150px;
      left: 50%;
      transform: translateX(-50%) scale(1);
      width: 280px;
      height: 280px;
      border-radius: 50%;
      background: radial-gradient(circle, #228B22, #006400);
      overflow: hidden;
      transition: transform 1s ease;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
    }

    .leaf {
      position: absolute;
      width: 22px;
      height: 22px;
      background: radial-gradient(circle at 30% 30%, #7CFC00, #006400);
      border-radius: 50%;
    }

    .flag {
      position: absolute;
      font-size: 18px;
      animation: drop 0.8s ease;
    }

    .flower {
      position: absolute;
      width: 14px;
      height: 14px;
      background: pink;
      border-radius: 50%;
      box-shadow: 0 0 4px rgba(255,105,180,0.6);
      animation: bloom 1s ease;
    }

    .bird {
      position: absolute;
      font-size: 22px;
      animation: fly 12s linear infinite;
    }

    .aura {
      position: absolute;
      top: -100px;
      left: 50%;
      transform: translateX(-50%);
      width: 450px;
      height: 450px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,223,0,0.3), transparent);
      z-index: -1;
      animation: pulse 4s infinite;
    }

    .sparkle {
      position: absolute;
      width: 8px;
      height: 8px;
      background: gold;
      border-radius: 50%;
      animation: twinkle 2s infinite alternate;
    }

    @keyframes drop { from { transform: translateY(-40px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes bloom { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    @keyframes pulse { from { transform: translateX(-50%) scale(0.95); } to { transform: translateX(-50%) scale(1.05); } }
    @keyframes twinkle { from { opacity: 0.2; } to { opacity: 1; } }
    @keyframes fly { from { left: -50px; top: 60px; } to { left: 110%; top: 100px; } }
    @keyframes heartbeat { 
      0% { transform: scale(1); } 
      30% { transform: scale(1.4); } 
      60% { transform: scale(0.9); } 
      100% { transform: scale(1); } 
    }

    /* Button */
    #button-container { position: relative; display: inline-block; }
    button {
      margin-top: 20px;
      padding: 14px 25px;
      font-size: 18px;
      background: #006400;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    button:hover { background: #228B22; transform: scale(1.05); }

    .floating-heart {
      position: absolute;
      font-size: 18px;
      color: red;
      animation: floatUp 1s ease forwards;
      pointer-events: none;
    }
    @keyframes floatUp {
      from { transform: translateY(0); opacity: 1; }
      to   { transform: translateY(-40px); opacity: 0; }
    }

    .counter { margin: 15px 0; font-size: 1.3em; font-weight: bold; }
    .daily-message { font-style: italic; color: #444; margin-bottom: 20px; }
  </style>
</head>
<body>
  <h1>üíö A Tree of Hearts for Palestine üíö</h1>
  <p>Every click is a heartbeat of solidarity. Together, our love makes the tree flourish.</p>

  <div id="tree-container">
    <div id="trunk"></div>
    <div id="canopy"></div>
  </div>

  <div id="button-container">
    <button onclick="plantHeart()">üíö Give a Heart of Solidarity</button>
  </div>
  
  <div class="counter">Total Hearts Given: <span id="counter">0</span></div>
  <div class="daily-message">‚ú® Come back tomorrow and see how many more hearts have grown on our tree. ‚ú®</div>

  <!-- Share -->
  <div class="share-buttons">
    <p>üíå Let‚Äôs spread the love ‚Äî share the tree and help it bloom.</p>
    <a class="whatsapp" target="_blank" href="https://wa.me/?text=üíö%20A%20Tree%20of%20Hearts%20for%20Palestine!%20Join%20us:%20YOUR_URL">WhatsApp</a>
    <a class="twitter" target="_blank" href="https://twitter.com/intent/tweet?text=üíö%20A%20Tree%20of%20Hearts%20for%20Palestine!%20Join%20us:%20YOUR_URL">Twitter (X)</a>
    <a class="facebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=YOUR_URL">Facebook</a>
  </div>

  <!-- Heartbeat sound -->
  <audio id="heart-sound" preload="auto">
    <source src="https://actions.google.com/sounds/v1/cartoon/pop.ogg" type="audio/ogg">
    <source src="https://actions.google.com/sounds/v1/cartoon/pop.mp3" type="audio/mpeg">
  </audio>

  <!-- Firebase SDK v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script>
        const firebaseConfig = {
      apiKey: "AIzaSyCGfqZx9kvYzHQokU9a5wlgbd_x-Yugx4g",
      authDomain: "palestine-tree.firebaseapp.com",
      projectId: "palestine-tree",
      storageBucket: "palestine-tree.firebasestorage.app",
      messagingSenderId: "47294950321",
      appId: "1:47294950321:web:2719cdf8d549f54ab6eb90",
      measurementId: "G-0Y6F2CE5NV"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const counter = document.getElementById('counter');
    const canopy = document.getElementById('canopy');
    const container = document.getElementById('tree-container');

    firebase.database().ref("clicks").on("value", snapshot => {
      const clicks = snapshot.val() || 0;
      counter.textContent = clicks;

      // Scale canopy
      let growth = 1 + clicks / 500;
      canopy.style.transform = `translateX(-50%) scale(${growth})`;

      // Reset canopy
      canopy.innerHTML = "";
      const radius = 120;

      for (let i = 0; i < clicks; i++) {
        if (i % 3 === 0) addHeart(radius, i);   // üíö‚ù§Ô∏èü§çüñ§ cycle
        if (i % 6 === 0) addLeaf(radius);       // üåø
        if (i % 15 === 0) addFlag(radius);      // üáµüá∏
      }

      // milestones
      if (clicks >= 500) addFlowers(radius);
      if (clicks >= 1000 && !document.querySelector(".bird")) addBirds();
      if (clicks >= 2000 && !document.querySelector(".aura")) addAura();
      if (clicks >= 5000) addSparkles();
    });

    function plantHeart() {
      firebase.database().ref("clicks").transaction(current => (current || 0) + 1);

      // Play sound
      const sound = document.getElementById("heart-sound");
      sound.currentTime = 0;
      sound.play();

      // Floating +1 ‚ù§Ô∏è
      const btnContainer = document.getElementById('button-container');
      const float = document.createElement('div');
      float.classList.add('floating-heart');
      float.textContent = "+1 ‚ù§Ô∏è";
      float.style.left = "50%";
      float.style.top = "-10px";
      float.style.transform = "translateX(-50%)";
      btnContainer.appendChild(float);
      setTimeout(() => float.remove(), 1000);
    }

    function addHeart(radius, index) {
      const heart = document.createElement('div');
      const colors = ["üíö", "‚ù§Ô∏è", "ü§ç", "üñ§"];
      heart.textContent = colors[index % colors.length];
      heart.style.position = "absolute";
      heart.style.fontSize = "20px";
      heart.style.animation = "drop 0.8s ease, heartbeat 1s ease 0.8s"; 
      const angle = Math.random() * 2 * Math.PI;
      const r = Math.sqrt(Math.random()) * radius;
      heart.style.left = (r * Math.cos(angle) + radius) + "px";
      heart.style.top = (r * Math.sin(angle) + radius) + "px";
      if (heart.textContent === "ü§ç") heart.style.textShadow = "0 0 3px black";
      canopy.appendChild(heart);
    }

    function addLeaf(radius) {
      const leaf = document.createElement('div');
      leaf.classList.add('leaf');
      const angle = Math.random() * 2 * Math.PI;
      const r = Math.sqrt(Math.random()) * radius;
      leaf.style.left = (r * Math.cos(angle) + radius) + "px";
      leaf.style.top = (r * Math.sin(angle) + radius) + "px";
      canopy.appendChild(leaf);
    }

    function addFlag(radius) {
      const flag = document.createElement('div');
      flag.classList.add('flag');
      flag.textContent = "üáµüá∏";
      const angle = Math.random() * 2 * Math.PI;
      const r = Math.sqrt(Math.random()) * radius;
      flag.style.left = (r * Math.cos(angle) + radius) + "px";
      flag.style.top = (r * Math.sin(angle) + radius) + "px";
      canopy.appendChild(flag);
    }

    function addFlowers(radius) {
      for (let i = 0; i < 15; i++) {
        const flower = document.createElement('div');
        flower.classList.add('flower');
        const angle = Math.random() * 2 * Math.PI;
        const r = Math.sqrt(Math.random()) * radius;
        flower.style.left = (r * Math.cos(angle) + radius) + "px";
        flower.style.top = (r * Math.sin(angle) + radius) + "px";
        canopy.appendChild(flower);
      }
    }

    function addBirds() {
      for (let i = 0; i < 2; i++) {
        const bird = document.createElement('div');
        bird.classList.add('bird');
        bird.textContent = "üïäÔ∏è";
        bird.style.top = (50 + i*40) + "px";
        bird.style.left = "-50px";
        container.appendChild(bird);
      }
    }

    function addAura() {
      const aura = document.createElement('div');
      aura.classList.add('aura');
      container.appendChild(aura);
    }

    function addSparkles() {
      for (let i = 0; i < 20; i++) {
        const sparkle = document.createElement('div');
        sparkle.classList.add('sparkle');
        sparkle.style.left = (Math.random()*280) + "px";
        sparkle.style.top = (Math.random()*280) + "px";
        canopy.appendChild(sparkle);
      }
    }
  </script>
</body>
</html>
