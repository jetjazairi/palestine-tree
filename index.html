<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Palestine Solidarity Tree</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to top, #cdeffd, #f5f5f5);
      text-align: center;
      overflow-x: hidden;
    }

    h1 { margin-top: 30px; font-size: 2.2em; }
    p { font-size: 1.1em; margin: 10px; }

    #tree-container {
      position: relative;
      margin: 40px auto;
      width: 300px;
      height: 500px;
    }

    /* Trunk */
    #trunk {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 160px;
      background: sienna;
      border-radius: 20px;
      box-shadow: inset -5px 0 #8b4513;
    }

    /* Canopy */
    #canopy {
      position: absolute;
      bottom: 120px;
      left: 50%;
      transform: translateX(-50%) scale(1);
      width: 250px;
      height: 250px;
      border-radius: 50%;
      transition: transform 1s ease-in-out;
      overflow: visible;
    }

    .leaf {
      position: absolute;
      width: 18px;
      height: 18px;
      background: radial-gradient(circle at 30% 30%, #7CFC00, #006400);
      border-radius: 50%;
      animation: grow 0.5s ease forwards;
    }

    .flag {
      position: absolute;
      font-size: 18px;
      animation: drop 1s ease forwards;
    }

    .flower {
      position: absolute;
      width: 16px;
      height: 16px;
      background: pink;
      border-radius: 50%;
      box-shadow: 0 0 5px rgba(255,105,180,0.6);
      animation: bloom 1s ease forwards;
    }

    .bird {
      position: absolute;
      font-size: 22px;
      animation: fly 12s linear infinite;
    }

    .aura {
      position: absolute;
      top: -60px;
      left: 50%;
      transform: translateX(-50%);
      width: 400px;
      height: 400px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,223,0,0.3), transparent);
      z-index: -1;
      animation: pulse 4s infinite;
    }

    .sparkle {
      position: absolute;
      width: 8px;
      height: 8px;
      background: gold;
      border-radius: 50%;
      animation: twinkle 2s infinite alternate;
    }

    @keyframes grow { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    @keyframes drop { from { transform: translateY(-40px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes bloom { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    @keyframes pulse { from { transform: translateX(-50%) scale(0.95); } to { transform: translateX(-50%) scale(1.05); } }
    @keyframes twinkle { from { opacity: 0.2; } to { opacity: 1; } }
    @keyframes fly { from { left: -50px; top: 50px; } to { left: 110%; top: 80px; } }

    button {
      margin-top: 20px;
      padding: 14px 25px;
      font-size: 18px;
      background: #006400;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    button:hover { background: #228B22; transform: scale(1.05); }

    .counter { margin: 15px 0; font-size: 1.3em; font-weight: bold; }
    .daily-message { margin-top: 8px; font-size: 1em; color: #444; font-style: italic; }

    .share-buttons { margin-top: 30px; }
    .share-buttons a {
      display: inline-block;
      margin: 0 10px;
      text-decoration: none;
      padding: 10px 15px;
      border-radius: 5px;
      color: #fff;
      font-weight: bold;
    }
    .whatsapp { background: #25D366; }
    .twitter { background: #1DA1F2; }
    .facebook { background: #4267B2; }

    /* Clouds */
    .cloud {
      position: absolute;
      top: 50px;
      width: 120px;
      height: 60px;
      background: #fff;
      border-radius: 60px;
      animation: float 40s linear infinite;
      opacity: 0.8;
    }
    .cloud::before, .cloud::after {
      content: '';
      position: absolute;
      background: #fff;
      border-radius: 50%;
    }
    .cloud::before { width: 80px; height: 80px; top: -20px; left: 10px; }
    .cloud::after { width: 60px; height: 60px; top: -10px; right: 15px; }
    @keyframes float { from { left: -200px; } to { left: 110%; } }
  </style>
</head>
<body>

  <h1>🌳 Stand with Palestine 🌳</h1>
  <p>Each click plants a flag 🇵🇸 and grows the tree for everyone.</p>

  <div class="cloud" style="top:60px; animation-delay:0s;"></div>
  <div class="cloud" style="top:120px; animation-delay:20s; width:150px;"></div>

  <div id="tree-container">
    <div id="trunk"></div>
    <div id="canopy"></div>
  </div>

  <button onclick="plantFlag()">🌱 Click to Plant a Flag</button>
  <div class="counter">Total Flags Planted: <span id="counter">0</span></div>
  <div class="daily-message">✨ Come back tomorrow to see the tree’s growth ✨</div>

  <div class="share-buttons">
    <p>📢 Share this tree with your friends:</p>
    <a class="whatsapp" target="_blank" href="https://wa.me/?text=🌳%20Stand%20with%20Palestine!%20Join%20us:%20YOUR_URL">WhatsApp</a>
    <a class="twitter" target="_blank" href="https://twitter.com/intent/tweet?text=🌳%20Stand%20with%20Palestine!%20Join%20us:%20YOUR_URL">Twitter (X)</a>
    <a class="facebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=YOUR_URL">Facebook</a>
  </div>

  <!-- Firebase SDK v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script>
        const firebaseConfig = {
      apiKey: "AIzaSyCGfqZx9kvYzHQokU9a5wlgbd_x-Yugx4g",
      authDomain: "palestine-tree.firebaseapp.com",
      projectId: "palestine-tree",
      storageBucket: "palestine-tree.firebasestorage.app",
      messagingSenderId: "47294950321",
      appId: "1:47294950321:web:2719cdf8d549f54ab6eb90",
      measurementId: "G-0Y6F2CE5NV"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const counter = document.getElementById('counter');
    const canopy = document.getElementById('canopy');
    const container = document.getElementById('tree-container');

    firebase.database().ref("clicks").on("value", snapshot => {
      const clicks = snapshot.val() || 0;
      counter.textContent = clicks;

      // Scale canopy
      let growthFactor = 1 + clicks / 300;
      canopy.style.transform = `translateX(-50%) scale(${growthFactor})`;

      // Reset canopy
      canopy.innerHTML = "";
      const radius = 120;

      for (let i = 0; i < clicks; i++) {
        if (i % 5 === 0) addLeaf(radius);
        if (i % 10 === 0) addFlag(radius);
      }

      // Milestones
      if (clicks >= 100 && !document.querySelector(".sapling-glow")) {
        canopy.style.boxShadow = "0 0 30px rgba(0,255,0,0.6)";
      }
      if (clicks >= 500) addFlowers(radius);
      if (clicks >= 1000 && !document.querySelector(".bird")) addBirds();
      if (clicks >= 2000 && !document.querySelector(".aura")) addAura();
      if (clicks >= 5000) addSparkles();
    });

    function plantFlag() {
      firebase.database().ref("clicks").transaction(current => (current || 0) + 1);
    }

    function addLeaf(radius) {
      const leaf = document.createElement('div');
      leaf.classList.add('leaf');
      const angle = Math.random() * 2 * Math.PI;
      const r = Math.sqrt(Math.random()) * radius;
      leaf.style.left = (r * Math.cos(angle) + radius) + "px";
      leaf.style.top = (r * Math.sin(angle) + radius) + "px";
      canopy.appendChild(leaf);
    }

    function addFlag(radius) {
      const flag = document.createElement('div');
      flag.classList.add('flag');
      flag.textContent = "🇵🇸";
      const angle = Math.random() * 2 * Math.PI;
      const r = Math.sqrt(Math.random()) * radius;
      flag.style.left = (r * Math.cos(angle) + radius) + "px";
      flag.style.top = (r * Math.sin(angle) + radius) + "px";
      canopy.appendChild(flag);
    }

    function addFlowers(radius) {
      for (let i = 0; i < 20; i++) {
        const flower = document.createElement('div');
        flower.classList.add('flower');
        const angle = Math.random() * 2 * Math.PI;
        const r = Math.sqrt(Math.random()) * radius;
        flower.style.left = (r * Math.cos(angle) + radius) + "px";
        flower.style.top = (r * Math.sin(angle) + radius) + "px";
        canopy.appendChild(flower);
      }
    }

    function addBirds() {
      for (let i = 0; i < 2; i++) {
        const bird = document.createElement('div');
        bird.classList.add('bird');
        bird.textContent = "🕊️";
        bird.style.top = (60 + i*30) + "px";
        bird.style.left = "-50px";
        container.appendChild(bird);
      }
    }

    function addAura() {
      const aura = document.createElement('div');
      aura.classList.add('aura');
      container.appendChild(aura);
    }

    function addSparkles() {
      for (let i = 0; i < 20; i++) {
        const sparkle = document.createElement('div');
        sparkle.classList.add('sparkle');
        sparkle.style.left = (Math.random()*300) + "px";
        sparkle.style.top = (Math.random()*300) + "px";
        canopy.appendChild(sparkle);
      }
    }
  </script>
</body>
</html>
